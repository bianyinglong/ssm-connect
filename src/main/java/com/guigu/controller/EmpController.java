package com.guigu.controller;import com.github.pagehelper.PageHelper;import com.github.pagehelper.PageInfo;import com.guigu.mybatis.pojo.Emp;import com.guigu.service.EmpService;import org.springframework.beans.factory.annotation.Autowired;import org.springframework.web.bind.annotation.*;import java.util.Arrays;import java.util.List;import java.util.Map;/** * @RestController æ˜¯@controllerå’Œ@ResponseBody çš„ç»“åˆ * @Controller å°†å½“å‰ä¿®é¥°çš„ç±»æ³¨å…¥SpringBoot IOCå®¹å™¨ï¼Œä½¿å¾—ä»è¯¥ç±»æ‰€åœ¨çš„é¡¹ç›®è·‘èµ·æ¥çš„è¿‡ç¨‹ä¸­ï¼Œè¿™ä¸ªç±»å°±è¢«å®ä¾‹åŒ–ã€‚ * @ResponseBody å®ƒçš„ä½œç”¨ç®€çŸ­æˆªè¯´å°±æ˜¯æŒ‡è¯¥ç±»ä¸­æ‰€æœ‰çš„APIæ¥å£è¿”å›çš„æ•°æ®ï¼Œç”­ç®¡ä½ å¯¹åº”çš„æ–¹æ³•è¿”å›Mapæˆ–æ˜¯å…¶ä»–Objectï¼Œå®ƒä¼šä»¥Jsonå­—ç¬¦ä¸²çš„å½¢å¼è¿”å›ç»™å®¢æˆ·ç«¯ */@RestController@CrossOrigin("*") // è®¾ç½®è·¨åŸŸ@RequestMapping("/emps")public class EmpController {    // æ³¨æ„ğŸ“¢ï¼šç±»å‹æ˜¯EmpService ä¸æ˜¯EmpServiceImpl    @Autowired    private EmpService empService;    @GetMapping    public Result getAllEmp(            @RequestParam(value = "pageNum", defaultValue = "1") Integer pageNum,            @RequestParam(value = "pageSize", defaultValue = "10") Integer pageSize    ) {        PageHelper.startPage(pageNum, pageSize);        List<Emp> empList = empService.getAllEmpWithDept();        PageInfo empListWithPageInfo = new PageInfo<>(empList, 5);        Integer code = empList != null ? Code.SUCCESS : Code.ERROR;        String msg = empList != null ? "è·å–å‘˜å·¥åˆ—è¡¨æˆåŠŸ" : "è·å–å‘˜å·¥åˆ—è¡¨å¤±è´¥";        return new Result(code, empListWithPageInfo, msg);    }    @GetMapping("/{id}")    public Result getEmpByEmpId(@PathVariable("id") Integer id) {        Emp emp = empService.getEmpByIdWithDept(id);        Integer code = emp != null ? Code.SUCCESS : Code.ERROR;        String msg = emp != null ? "è·å–å‘˜å·¥ä¿¡æ¯æˆåŠŸï¼" : "è·å–å‘˜å·¥ä¿¡æ¯å¤±è´¥ï¼";        return new Result(code, emp, msg);    }    // ä¸€å®šè¦è®¾ç½®@RequestBodyï¼Œè¡¨ç¤ºå‰ç«¯ä¼ é€’çš„æ•°æ®æ¥è‡ªè¯·æ±‚ä½“    @PostMapping    public Result insertEmp(@RequestBody Emp emp) {        System.out.println("emp===>" + emp);        boolean flag = empService.insertEmp(emp);        return new Result(flag ? Code.SUCCESS : Code.ERROR, flag);    }    @PutMapping("/{empId}")    public Result updateEmp(@PathVariable Integer empId, @RequestBody Emp emp) {        emp.setEmpId(empId);        boolean flag = empService.updateEmp(emp);        return new Result(flag ? Code.SUCCESS : Code.ERROR, flag);    }    @DeleteMapping("/{id}")    public Result deleteEmpById(@PathVariable("id") Integer id) {        boolean flag = empService.deleteEmpById(id);        return new Result(flag ? Code.SUCCESS : Code.ERROR, flag);    }    // ä¼ é€’å‚æ•°ä¸ºæ•°ç»„ï¼ŒMapä¸­çš„keyå³ä¸ºä¼ é€’çš„å±æ€§åç§°    @DeleteMapping("/batch")    public Result deleteByIds(@RequestBody Map<String, Integer[]> requestMap) {        boolean flag = empService.deleteEmpByIds(requestMap.get("ids"));        return new Result(flag ? Code.SUCCESS : Code.ERROR, flag);    }}